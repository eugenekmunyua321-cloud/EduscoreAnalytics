[supervisord]
nodaemon=false
logfile=/var/log/supervisor/supervisord.log
pidfile=/var/run/supervisord.pid
childlogdir=/var/log/supervisor

[program:eduscore_main_app]
command=streamlit run app.py --server.port 5000 --server.address 127.0.0.1 --server.headless true
directory=/path/to/EduscoreAnalytics
user=www-data
autostart=true
autorestart=true
startretries=3
redirect_stderr=true
stdout_logfile=/var/log/supervisor/eduscore_main_app.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=10
stderr_logfile=/var/log/supervisor/eduscore_main_app_err.log
stderr_logfile_maxbytes=50MB
stderr_logfile_backups=10
environment=PATH="/usr/bin:/usr/local/bin",HOME="/home/www-data"

[program:eduscore_admin_features]
command=streamlit run admin_features.py --server.port 5001 --server.address 127.0.0.1 --server.headless true
directory=/path/to/EduscoreAnalytics
user=www-data
autostart=true
autorestart=true
startretries=3
redirect_stderr=true
stdout_logfile=/var/log/supervisor/eduscore_admin_features.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=10
stderr_logfile=/var/log/supervisor/eduscore_admin_features_err.log
stderr_logfile_maxbytes=50MB
stderr_logfile_backups=10
environment=PATH="/usr/bin:/usr/local/bin",HOME="/home/www-data"

[program:eduscore_parents_portal]
command=streamlit run parents_portal_standalone.py --server.port 5002 --server.address 127.0.0.1 --server.headless true
directory=/path/to/EduscoreAnalytics
user=www-data
autostart=true
autorestart=true
startretries=3
redirect_stderr=true
stdout_logfile=/var/log/supervisor/eduscore_parents_portal.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=10
stderr_logfile=/var/log/supervisor/eduscore_parents_portal_err.log
stderr_logfile_maxbytes=50MB
stderr_logfile_backups=10
environment=PATH="/usr/bin:/usr/local/bin",HOME="/home/www-data"

[group:eduscore_apps]
programs=eduscore_main_app,eduscore_admin_features,eduscore_parents_portal
priority=999
